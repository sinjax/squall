<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE Document [
  <!ENTITY rif  	"http://www.w3.org/2007/rif#">
  <!ENTITY xs   	"http://www.w3.org/2001/XMLSchema#">
  <!ENTITY rdf  	"http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <!ENTITY rdfs		"http://www.w3.org/2000/01/rdf-schema#">
  <!ENTITY sib  	"http://www.ins.cwi.nl/sib/vocabulary/">
  <!ENTITY sibpred  "http://www.ins.cwi.nl/sib/rif-builtin-predicate/">
  <!ENTITY foaf 	"http://xmlns.com/foaf/0.1/">
  <!ENTITY sioc 	"http://rdfs.org/sioc/ns#">
  <!ENTITY dbpprop	"http://dbpedia.org/property/">
]>

<Document>
  <directive>
    <Import>
    	<location>/lsbench/rules.rif</location>
    </Import>
  </directive>
<!--
  <directive>
    <Import>
    	<location>http://deri.org/poststream</location>
    	<profile>http://www.w3.org/ns/stream/NTriples</profile>
    </Import>
  </directive>
  <directive>
    <Import>
    	<location>http://deri.org/photostream</location>
    	<profile>http://www.w3.org/ns/stream/NTriples</profile>
    </Import>
  </directive>
  <directive>
    <Import>
    	<location>http://deri.org/likedphotostream</location>
    	<profile>http://www.w3.org/ns/stream/NTriples</profile>
    </Import>
  </directive>
-->
  <payload>
  	<Group>
  	  <sentence>
  	    <Forall>
  	      <id>
  	      	<Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/lsbench-query-1</Const>
  	      </id>
  	      <declare>
  	      	<Var>p</Var>
  	      </declare>
  	      <declare>
  	      	<Var>o</Var>
  	      </declare>
  	      <formula>
  	      	<Implies>
  	      	  <if>
  	      	  	<Frame>
  	      	  	  <object>
  	      	  	    <Const type="&rif;iri">http://www.ins.cwi.nl/sib/user/u984</Const>
  	      	  	  </object>
  	      	  	  <slot ordered="yes">
  	      	  	  	<Var>p</Var>
  	      	  	  	<Var>o</Var>
  	      	  	  </slot>
  	      	  	</Frame>
  	      	  </if>
  	      	  <then>
  	      	  	<Atom>
  	      	  	  <op>
  	      	  	    <Const type="&rif;local">bindings</Const>
  	      	  	  </op>
  	      	  	  <args ordered="yes">
  	      	  	  	<Var>p</Var>
  	      	  	  	<Var>o</Var>
  	      	  	  </args>
  	      	  	</Atom>
  	      	  </then>
  	      	</Implies>
  	      </formula>
  	    </Forall>
  	  </sentence>
  	  <sentence>
  	    <Forall>
  	      <id>
  	      	<Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/lsbench-query-2</Const>
  	      </id>
  	      <declare>
  	      	<Var>post</Var>
  	      </declare>
  	      <formula>
  	      	<Implies>
  	      	  <if>
  	      	    <Exists>
  	      	      <declare>
  	      	        <Var>user</Var>
  	      	      </declare>
  	      	      <formula>
  	      	        <Frame>
  	      	          <object>
  	      	            <Var>user</Var>
  	      	          </object>
  	      	          <slot ordered="yes">
  	      	            <Const type="&rif;iri">http://rdfs.org/sioc/ns#creator_of</Const>
  	      	            <Var>post</Var>
  	      	          </slot>
  	      	          <slot ordered="yes">
  	      	            <Const type="&rif;iri">http://rdfs.org/sioc/ns#account_of</Const>
  	      	            <Const type="&rif;iri">http://www.ins.cwi.nl/sib/person/p984</Const>
  	      	          </slot>
  	      	        </Frame>
  	      	      </formula>
  	      	    </Exists>
  	      	  </if>
  	      	  <then>
  	      	    <Atom>
  	      	      <op>
  	      	        <Const type="&rif;local">bindings</Const>
  	      	      </op>
  	      	      <args ordered="yes">
  	      	      	<Var>post</Var>
  	      	      </args>
  	      	    </Atom>
  	      	  </then>
  	      	</Implies>
  	      </formula>
  	    </Forall>
  	  </sentence>
  	  <sentence>
  	    <Forall>
  	      <id>
  	      	<Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/lsbench-query-3</Const>
  	      </id>
  	      <declare>
  	      	<Var>friend</Var>
  	      </declare>
  	      <declare>
  	      	<Var>post</Var>
  	      </declare>
  	      <formula>
  	      	<Implies>
  	      	  <if>
  	      	    <And>
  	      	      <formula>
  	      	        <Frame>
  	      	          <object>
  	      	            <Var>friend</Var>
  	      	          </object>
  	      	          <slot ordered="yes">
  	      	            <Const type="&rif;iri">http://rdfs.org/sioc/ns#creator_of</Const>
  	      	            <Var>post</Var>
  	      	          </slot>
  	      	        </Frame>
  	      	      </formula>
  	      	      <formula>
  	      	        <Exists>
  	      	          <declare>
  	      	            <Var>user</Var>
  	      	          </declare>
  	      	          <formula>
  	      	            <Frame>
  	      	              <object>
  	      	                <Var>user</Var>
  	      	              </object>
  	      	              <slot ordered="yes">
  	      	                <Const type="&rif;iri">http://rdfs.org/sioc/ns#account_of</Const>
  	      	                <Const type="&rif;iri">http://www.ins.cwi.nl/sib/person/p984</Const>
  	      	              </slot>
  	      	              <slot ordered="yes">
  	      	                <Const type="&rif;iri">http://xmlns.com/foaf/0.1/knows</Const>
  	      	                <Var>friend</Var>
  	      	              </slot>
  	      	            </Frame>
  	      	          </formula>
  	      	        </Exists>
  	      	      </formula>
  	      	    </And>
  	      	  </if>
  	      	  <then>
  	      	  	<Atom>
  	      	      <op>
  	      	        <Const type="&rif;local">bindings</Const>
  	      	      </op>
  	      	      <args ordered="yes">
  	      	        <Var>friend</Var>
  	      	      	<Var>post</Var>
  	      	      </args>
  	      	    </Atom>
  	      	  </then>
  	      	</Implies>
  	      </formula>
  	    </Forall>
  	  </sentence>
  	  <sentence>
  	    <Forall>
  	      <id>
  	      	<Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/lsbench-query-4</Const>
  	      </id>
  	      <declare>
  	      	<Var>post1</Var>
  	      </declare>
		  <declare>
  	      	<Var>post2</Var>
  	      </declare>
  	      <declare>
  	      	<Var>tag</Var>
  	      </declare>
  	      <formula>
  	      	<Implies>
  	      	  <if>
  	      	  	<And>
  	      	  	  <formula>
  	      	  	    <Frame>
      	              <object>
      	                <Var>post1</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/hashtag</Const>
      	                <Var>tag</Var>
      	              </slot>
      	            </Frame>
  	      	  	  </formula>
  	      	  	  <formula>
  	      	  	    <Frame>
      	              <object>
      	                <Var>post2</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/hashtag</Const>
      	                <Var>tag</Var>
      	              </slot>
      	            </Frame>
  	      	  	  </formula>
  	      	  	  <formula>
  	      	  	    <External>
  	      	  	      <content>
  	      	  	        <Atom>
  	      	  	          <op>
  	      	  	            <Const type="&rif;iri">http://www.w3.org/2007/rif-builtin-predicate#literal-not-equal</Const>
  	      	  	          </op>
  	      	  	          <args ordered="yes">
  	      	  	            <Var>post1</Var>
  	      	  	            <Var>post2</Var>
  	      	  	          </args>
  	      	  	        </Atom>
  	      	  	      </content>
  	      	  	    </External>
  	      	  	  </formula>
  	      	  	  <formula>
  	      	  	    <Exists>
  	      	  	      <declare>
  	      	  	        <Var>user</Var>
  	      	  	      </declare>
  	      	  	      <formula>
  	      	  	        <Frame>
  	      	              <object>
  	      	                <Var>user</Var>
  	      	              </object>
  	      	              <slot ordered="yes">
  	      	                <Const type="&rif;iri">http://rdfs.org/sioc/ns#creator_of</Const>
  	      	                <Var>post1</Var>
  	      	              </slot>
  	      	              <slot ordered="yes">
  	      	                <Const type="&rif;iri">http://rdfs.org/sioc/ns#creator_of</Const>
  	      	                <Var>post2</Var>
  	      	              </slot>
  	      	            </Frame>
  	      	  	      </formula>
  	      	  	    </Exists>
  	      	  	  </formula>
  	      	  	</And>
  	      	  </if>
  	      	  <then>
  	      	    <Atom>
  	      	      <op>
  	      	        <Const type="&rif;local">bindings</Const>
  	      	      </op>
  	      	      <args ordered="yes">
  	      	        <Var>post1</Var>
  	      	      	<Var>post2</Var>
  	      	      	<Var>tag</Var>
  	      	      </args>
  	      	    </Atom>
  	      	  </then>
  	      	</Implies>
  	      </formula>
  	    </Forall>
  	  </sentence>
  	  <sentence>
  	    <Forall>
  	      <id>
  	      	<Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/lsbench-query-5</Const>
  	      </id>
  	      <declare>
  	      	<Var>friend1</Var>
  	      </declare>
  	      <declare>
  	      	<Var>friend2</Var>
  	      </declare>
  	      <declare>
  	      	<Var>photo</Var>
  	      </declare>
  	      <formula>
  	      	<Implies>
  	      	  <if>
  	      	    <And>
  	      	      <formula>
  	      	        <Frame>
      	              <object>
      	                <Var>photo</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/usertag</Const>
      	                <Var>friend1</Var>
      	              </slot>
      	            </Frame>
  	      	      </formula>
  	      	      <formula>
  	      	        <Frame>
      	              <object>
      	                <Var>friend1</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://xmlns.com/foaf/0.1/knows</Const>
      	                <Var>friend2</Var>
      	              </slot>
      	            </Frame>
  	      	      </formula>
  	      	      <formula>
  	      	        <Frame>
      	              <object>
      	                <Var>friend2</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/like</Const>
      	                <Var>photo</Var>
      	              </slot>
      	            </Frame>
  	      	      </formula>
  	      	    </And>
  	      	  </if>
  	      	  <then>
  	      	    <Atom>
  	      	      <op>
  	      	        <Const type="&rif;local">bindings</Const>
  	      	      </op>
  	      	      <args ordered="yes">
  	      	        <Var>friend1</Var>
  	      	      	<Var>friend2</Var>
  	      	      	<Var>photo</Var>
  	      	      </args>
  	      	    </Atom>
  	      	  </then>
  	      	</Implies>
  	      </formula>
  	    </Forall>
  	  </sentence>
  	  <sentence>
  	    <Forall>
  	      <id>
  	      	<Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/lsbench-query-6</Const>
  	      </id>
  	      <declare>
  	      	<Var>user</Var>
  	      </declare>
  	      <declare>
  	      	<Var>friend</Var>
  	      </declare>
  	      <declare>
  	      	<Var>post</Var>
  	      </declare>
  	      <declare>
  	      	<Var>channel</Var>
  	      </declare>
  	      <formula>
  	      	<Implies>
  	      	  <if>
  	      	    <And>
  	      	      <formula>
  	      	        <Frame>
      	              <object>
      	                <Var>user</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://xmlns.com/foaf/0.1/knows</Const>
      	                <Var>friend</Var>
      	              </slot>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://rdfs.org/sioc/ns#subscriber_of</Const>
      	                <Var>channel</Var>
      	              </slot>
      	            </Frame>
  	      	      </formula>
  	      	      <formula>
  	      	        <Frame>
      	              <object>
      	                <Var>friend</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/like</Const>
      	                <Var>post</Var>
      	              </slot>
      	            </Frame>
  	      	      </formula>
  	      	      <formula>
  	      	        <Frame>
      	              <object>
      	                <Var>channel</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://rdfs.org/sioc/ns#container_of</Const>
      	                <Var>post</Var>
      	              </slot>
      	            </Frame>
  	      	      </formula>
  	      	    </And>
  	      	  </if>
  	      	  <then>
  	      	    <Atom>
  	      	      <op>
  	      	        <Const type="&rif;local">bindings</Const>
  	      	      </op>
  	      	      <args ordered="yes">
  	      	        <Var>user</Var>
  	      	        <Var>friend</Var>
  	      	      	<Var>post</Var>
  	      	      	<Var>channel</Var>
  	      	      </args>
  	      	    </Atom>
  	      	  </then>
  	      	</Implies>
  	      </formula>
  	    </Forall>
  	  </sentence>
  	  <sentence>
  	    <Forall>
  	      <id>
  	      	<Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/lsbench-query-7.5</Const>
  	      </id>
  	      <declare>
  	      	<Var>user</Var>
  	      </declare>
  	      <declare>
  	      	<Var>photo</Var>
  	      </declare>
  	      <declare>
  	      	<Var>likedby</Var>
  	      </declare>
  	      <declare>
  	      	<Var>inphoto</Var>
  	      </declare>
  	      <formula>
  	      	<Implies>
  	      	  <if>
  	      	    <And>
  	      	      <formula>
  	      	        <Frame>
      	              <object>
      	                <Var>user</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://xmlns.com/foaf/0.1/knows</Const>
      	                <Var>inphoto</Var>
      	              </slot>
      	            </Frame>
  	      	      </formula>
  	      	      <formula>
  	      	        <Frame>
      	              <object>
      	                <Var>likedby</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/like</Const>
      	                <Var>photo</Var>
      	              </slot>
      	            </Frame>
  	      	      </formula>
  	      	      <formula>
  	      	        <Frame>
      	              <object>
      	                <Var>photo</Var>
      	              </object>
      	              <slot ordered="yes">
      	                <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/usertag</Const>
      	                <Var>inphoto</Var>
      	              </slot>
      	            </Frame>
  	      	      </formula>
  	      	      <formula>
  	      	        <Exists>
  	      	          <declare>
			  	      	<Var>userlong</Var>
			  	      </declare>
			  	      <declare>
			  	      	<Var>userlat</Var>
			  	      </declare>
			  	      <declare>
			  	      	<Var>photolong</Var>
			  	      </declare>
			  	      <declare>
			  	      	<Var>photolat</Var>
			  	      </declare>
			  	      <formula>
			  	        <And>
			  	          <formula>
			  	            <Frame>
			      	          <object>
			      	            <Var>photo</Var>
			      	          </object>
			      	          <slot ordered="yes">
			      	            <Const type="&rif;iri">http://dbpedia.org/property/longd</Const>
			      	            <Var>photolong</Var>
			      	          </slot>
			      	          <slot ordered="yes">
			      	            <Const type="&rif;iri">http://dbpedia.org/property/latd</Const>
			      	            <Var>photolat</Var>
			      	          </slot>
			      	        </Frame>
			  	          </formula>
			  	          <formula>
			  	            <Exists>
			  	              <declare>
			  	                <Var>gps</Var>
			  	              </declare>
			  	              <formula>
			  	                <And>
			  	                  <formula>
			  	                    <Frame>
					      	          <object>
					      	            <Var>user</Var>
					      	          </object>
					      	          <slot ordered="yes">
					      	            <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/visited</Const>
					      	            <Var>gps</Var>
					      	          </slot>
					      	        </Frame>
			  	                  </formula>
			  	                  <formula>
			  	                    <Frame>
					      	          <object>
					      	            <Var>gps</Var>
					      	          </object>
					      	          <slot ordered="yes">
					      	            <Const type="&rif;iri">http://dbpedia.org/property/longd</Const>
					      	            <Var>userlong</Var>
					      	          </slot>
					      	          <slot ordered="yes">
					      	            <Const type="&rif;iri">http://dbpedia.org/property/latd</Const>
					      	            <Var>userlat</Var>
					      	          </slot>
					      	        </Frame>
			  	                  </formula>
			  	                </And>
			  	              </formula>
			  	            </Exists>
			  	          </formula>
			  	          <formula>
			  	            <External>
			  	              <content>
			  	                <Atom>
				  	      	      <op>
				  	      	        <Const type="&rif;iri">http://www.ins.cwi.nl/sib/rif-builtin-predicate/geo-in-haversine-distance</Const>
				  	      	      </op>
				  	      	      <args ordered="yes">
				  	      	        <Const type="&xs;integer">1</Const>
				  	      	        <Var>userlong</Var>
				  	      	        <Var>userlat</Var>
				  	      	      	<Var>photolong</Var>
				  	      	      	<Var>photolat</Var>
				  	      	      </args>
				  	      	    </Atom>
			  	              </content>
			  	            </External>
			  	          </formula>
			  	        </And>
			  	      </formula>
  	      	        </Exists>
  	      	      </formula>
  	      	    </And>
  	      	  </if>
  	      	  <then>
  	      	    <Atom>
  	      	      <op>
  	      	        <Const type="&rif;local">bindings</Const>
  	      	      </op>
  	      	      <args ordered="yes">
  	      	        <Var>user</Var>
  	      	        <Var>photo</Var>
  	      	      	<Var>likedby</Var>
  	      	      	<Var>inphoto</Var>
  	      	      </args>
  	      	    </Atom>
  	      	  </then>
  	      	</Implies>
  	      </formula>
  	    </Forall>
  	  </sentence>
<!--
  	  <sentence>
  	    <Forall>
  	      <id>
  	      	<Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/lsbench-rule-visited-by-tag</Const>
  	      </id>
  	      <meta>
  	      	<Frame>
  	      	  <object>
  	      	    <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/usertag</Const>
  	      	  </object>
  	      	  <slot ordered="yes">
  	      	    <Const type="&rif;iri">http://www.w3.org/2000/01/rdf-schema#subPropertyOf</Const>
  	      	    <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/visited</Const>
  	      	  </slot>
  	      	</Frame>
  	      </meta>
  	      <declare>
  	      	<Var>photo</Var>
  	      </declare>
  	      <declare>
  	      	<Var>user</Var>
  	      </declare>
  	      <formula>
  	      	<Implies>
  	      	  <if>
  	      	    <Frame>
	  	      	  <object>
	  	      	    <Var>photo</Var>
	  	      	  </object>
	  	      	  <slot ordered="yes">
	  	      	    <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/usertag</Const>
	  	      	    <Var>user</Var>
	  	      	  </slot>
	  	      	</Frame>
  	      	  </if>
  	      	  <then>
  	      	  	<Frame>
	  	      	  <object>
	  	      	    <Var>user</Var>
	  	      	  </object>
	  	      	  <slot ordered="yes">
	  	      	    <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/visited</Const>
	  	      	    <Var>photo</Var>
	  	      	  </slot>
	  	      	</Frame>
  	      	  </then>
  	      	</Implies>
  	      </formula>
  	    </Forall>
  	  </sentence>
  	  <sentence>
  	    <Forall>
  	      <id>
  	      	<Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/lsbench-rule-visited-by-tracked</Const>
  	      </id>
  	      <meta>
  	      	<Frame>
  	      	  <object>
  	      	    <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/trackedAt</Const>
  	      	  </object>
  	      	  <slot ordered="yes">
  	      	    <Const type="&rif;iri">http://www.w3.org/2000/01/rdf-schema#subPropertyOf</Const>
  	      	    <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/visited</Const>
  	      	  </slot>
  	      	</Frame>
  	      </meta>
  	      <declare>
  	      	<Var>gps</Var>
  	      </declare>
  	      <declare>
  	      	<Var>user</Var>
  	      </declare>
  	      <formula>
  	      	<Implies>
  	      	  <if>
  	      	    <Frame>
	  	      	  <object>
	  	      	    <Var>user</Var>
	  	      	  </object>
	  	      	  <slot ordered="yes">
	  	      	    <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/trackedAt</Const>
	  	      	    <Var>gps</Var>
	  	      	  </slot>
	  	      	</Frame>
  	      	  </if>
  	      	  <then>
  	      	    <Frame>
	  	      	  <object>
	  	      	    <Var>user</Var>
	  	      	  </object>
	  	      	  <slot ordered="yes">
	  	      	    <Const type="&rif;iri">http://www.ins.cwi.nl/sib/vocabulary/visited</Const>
	  	      	    <Var>gps</Var>
	  	      	  </slot>
	  	      	</Frame>
  	      	  </then>
  	      	</Implies>
  	      </formula>
  	    </Forall>
  	  </sentence>
-->
  	</Group>
  </payload>
</Document>